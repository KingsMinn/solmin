---
title: 3-Way Handshake
date: 2025-09-17
updated: 2025-09-17
tags:
  - status/growing
  - type/web
published: false
aliases: []
---
# 3-Way Handshake
우리가 방금 이야기한 [[SSH]]나 [[HTTPS]]의 'Handshake'가 스파이들의 '암호 확인' 같은 **보안 계층(응용 계층)** 의 악수였다면, 지금 질문하신 3-Way Handshake는 그보다 훨씬 더 근본적인, **모든 인터넷 통신의 시작을 알리는 '사교계의 첫인사'** 같은 것입니다. 바로 **[[250917-TCP|TCP 프로토콜]]**의 핵심이죠.

자, TMI를 최대 출력으로 올리고 이 우아하고도 중요한 '세 번의 악수'에 대해 깊이 파고들어 봅시다.

## 1. TMI 서막: 인터넷 택배 시스템의 두 가지 선택지
인터넷에서 데이터를 보내는 방식은 크게 두 가지 택배 서비스로 나눌 수 있습니다.

1. **[[250917-UDP]] 택배 (빠르지만 불안한 퀵서비스):**
    - **비유:** 중요한 서류를 그냥 퀵서비스 오토바이에 실어 보내는 것과 같습니다.
    - **특징:** 빠르다는 것 외에는 아무것도 보장하지 않습니다. 중간에 서류가 분실될 수도 있고, 여러 장을 보냈다면 순서가 뒤죽박죽으로 도착할 수도 있습니다. 받는 사람이 받았는지 확인조차 하지 않습니다. 그냥 '일단 보낸다'는 데 의의가 있죠.
    - **주요 고객:** 실시간 영상 스트리밍(유튜브), 온라인 게임 등. 약간의 데이터 손실이 있더라도 속도가 생명인 서비스들이 사용합니다.
        
2. **TCP 택배 (느리지만 완벽한 안심 택배):**
    - **비유:** 아주 중요한 유리병을 보내기 전에, 먼저 받는 사람에게 전화를 걸어 "지금 유리병 보낼 건데, 받을 준비되셨나요?"라고 확인하고, 받는 사람이 "네, 준비됐습니다"라고 답하면 보내고, 도착한 뒤에는 "잘 받았습니다"라는 확인 전화까지 받는, 아주 꼼꼼한 택배 서비스입니다.
    - **특징:** 데이터가 정확한 순서대로, 빠짐없이, 100% 전달되는 것을 보장합니다. 신뢰성이 생명이죠.
    - **주요 고객:** 웹 브라우징(HTTP), 이메일, 파일 전송(FTP) 등. 데이터 손실이 치명적인 거의 모든 인터넷 서비스가 사용합니다.
    
**3-Way Handshake는 바로 이 'TCP 안심 택배' 서비스가 배송을 시작하기 전에, 보내는 사람과 받는 사람이 서로의 상태를 확인하고 연결을 설정하는 '사전 통화' 과정입니다.**

---

## 2. 3-Way Handshake: 세 번의 우아한 악수
이 '사전 통화'는 아주 체계적인 세 단계로 이루어집니다. 여기서 클라이언트(내 컴퓨터)와 서버(구글)가 주인공입니다.

- **등장인물:**
    - **SYN (싱크로나이즈):** "안녕하세요, 지금 통화 괜찮으신가요? 제 말 들리세요?" 라는 의미의 신호.
    - **ACK (애크날리지먼트):** "네, 당신 말이 잘 들립니다. 확인했습니다." 라는 의미의 응답.
        

**악수의 3단계:**

1. **1단계 (Client → Server): `SYN`**
    - **클라이언트가 먼저 말을 겁니다:** "저기요 구글 서버님, 저랑 통신하고 싶은데, 준비되셨나요? (Can we **SYN**chronize?)"
    - **기술적으로:** 클라이언트는 `SYN` 플래그가 1로 설정된 TCP 패킷을 서버로 보냅니다. 이때 "저는 지금부터 `100`번부터 번호를 세기 시작하겠습니다"라는 의미로 임의의 시퀀스 번호(예: `seq=100`)를 함께 보냅니다.

2. **2단계 (Server → Client): `SYN + ACK`**
    - **서버가 응답합니다:** "아, 솔민님! 네, 당신의 요청 잘 받았습니다(** ACK**nowledge). 저도 준비됐습니다. 제 말도 잘 들리시나요?(** SYN**chronize)"
    - **기술적으로:** 서버는 `SYN` 플래그와 `ACK` 플래그가 모두 1로 설정된 패킷을 보냅니다. 이때 "당신이 보낸 `100`번 잘 받았습니다. 이제 `101`번을 보내주세요"라는 의미로 확인 번호(`ack=101`)를 보내고, "저는 `300`번부터 번호를 세기 시작하겠습니다"라는 자신의 시퀀스 번호(`seq=300`)도 함께 보냅니다.
        
3. **3단계 (Client → Server): `ACK`**
    - **클라이언트가 마지막으로 확인해줍니다:** "네, 구글 서버님! 당신의 응답도 잘 받았습니다(** ACK**nowledge). 이제 통신을 시작합시다!"
    - **기술적으로:** 클라이언트는 `ACK` 플래그가 1로 설정된 패킷을 보냅니다. "당신이 보낸 `300`번 잘 받았습니다. 이제 `301`번을 보내주세요"라는 의미로 확인 번호(`ack=301`)를 보내면서, 이제 진짜 데이터(HTTP 요청 등)를 함께 실어 보내기 시작합니다.
        

이 세 번의 '악수'가 성공적으로 끝나면, 클라이언트와 서버 양쪽 모두 "아, 상대방이 살아있고, 서로의 말을 듣고 응답할 준비가 완벽하게 되었구나"라는 **'상호 신뢰'** 를 형성하게 됩니다. 이제 이 연결 위에서 데이터가 안전하게 오고 갈 수 있는 '가상의 터널(TCP Connection)'이 열린 것입니다.

[[250917-4-way-handshake|헤어질 때는 4-way handshake]]
[[250917-SYN-Flooding|3-way handshake 약점을 이용한 Dos공격: 무수한 악수의 요청]]