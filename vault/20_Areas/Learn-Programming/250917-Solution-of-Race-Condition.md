---
title: "경쟁 상태 해결책: 뮤텍스와 세마포어"
date: 2025-09-17
updated: 2025-09-17
tags:
published: false
aliases: []
---
# 경쟁 상태 해결책: 뮤텍스와 세마포어
네, 그럼요! '경쟁 상태(Race Condition)'라는 문제를 해결하기 위한 경비원들, **뮤텍스(Mutex)** 와 **세마포어(Semaphore)** 에 대해 아주 재미있게 설명해 드릴게요.

이 둘은 멀티스레딩/멀티프로세싱 환경, 즉 여러 일꾼(스레드)이 동시에 일하는 환경에서 공유 자원(하나뿐인 망치)을 안전하게 사용하기 위한 '교통정리' 규칙입니다.

## 핵심 비유: 화장실과 열쇠
이 두 개념을 이해하는 가장 완벽한 비유는 '화장실'입니다.

- 싱글 스레드 [[250917-Mutex|Mutex]]
- 멀티스레드 [[250917-Semaphore|Semaphore]]

### 한눈에 비교하기
| 구분         | 뮤텍스 (Mutex)                                   | 세마포어 (Semaphore)                                |
| ---------- | --------------------------------------------- | ----------------------------------------------- |
| **비유**     | 1인용 화장실의 **열쇠 1개**                            | 3인용 화장실의 **열쇠 꾸러미 (3개)**                        |
| **목적**     | **상호 배제 (Mutual Exclusion)**. 오직 하나만 접근!      | **자원 접근 제어**. N개까지는 접근 허용!                      |
| **상태**     | 잠김 / 풀림 (이진 상태)                               | 사용 가능한 자원의 개수 (정수 카운터)                          |
| **소유권**    | 열쇠를 가져간 스레드만 반납 가능                            | 다른 스레드가 열쇠를 대신 반납해 줄 수도 있음                      |
| **주요 사용처** | 경쟁 상태를 막기 위한 **'임계 영역(Critical Section)'** 보호 | **데이터베이스 커넥션 풀**, **스레드 풀** 등 자원의 개수가 정해져 있는 경우 |

**임계 영역(Critical Section)**이란, 이전 '경쟁 상태' 예시에서 은행 잔고를 `+` 또는 `-` 하는 코드처럼, 두 개 이상의 스레드가 동시에 실행하면 문제가 발생하는 아주 중요한 코드 구역을 의미합니다. 뮤텍스는 이 임계 영역 전체를 '1인용 화장실'처럼 잠가버리는 역할을 합니다.

---

뮤텍스나 세마포어 같은 잠금(Lock) 장치를 잘못 사용하면, 여러 스레드가 서로가 가진 열쇠를 달라고 하면서 영원히 기다리는 끔찍한 상황이 발생할 수 있습니다. 이를 '[[250917-Deadlock|교착 상태]]'라고 합니다.